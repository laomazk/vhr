{"remainingRequest":"F:\\java-workspace\\vhr\\vuehr\\node_modules\\babel-loader\\lib\\index.js!F:\\java-workspace\\vhr\\vuehr\\src\\utils\\menus.js","dependencies":[{"path":"F:\\java-workspace\\vhr\\vuehr\\src\\utils\\menus.js","mtime":1603101350205},{"path":"F:\\java-workspace\\vhr\\vuehr\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\java-workspace\\vhr\\vuehr\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN0YXJ0cy13aXRoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCB7IGdldFJlcXVlc3QgfSBmcm9tICJAL3V0aWxzL2FwaSI7CmV4cG9ydCB2YXIgaW5pdE1lbnUgPSBmdW5jdGlvbiBpbml0TWVudShyb3V0ZXIsIHN0b3JlKSB7CiAgaWYgKHN0b3JlLnN0YXRlLnJvdXRlcy5sZW5ndGggPiAwKSB7CiAgICByZXR1cm47CiAgfQoKICBnZXRSZXF1ZXN0KCIvc3lzdGVtL2NvbmZpZy9tZW51IikudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgaWYgKGRhdGEpIHsKICAgICAgdmFyIGZtdFJvdXRlcyA9IGZvcm1hdFJvdXRlcyhkYXRhKTsKICAgICAgcm91dGVyLmFkZFJvdXRlcyhmbXRSb3V0ZXMpOwogICAgICBzdG9yZS5jb21taXQoJ2luaXRSb3V0ZXMnLCBmbXRSb3V0ZXMpOwogICAgICBzdG9yZS5kaXNwYXRjaCgnY29ubmVjdCcpOwogICAgfQogIH0pOwp9OwpleHBvcnQgdmFyIGZvcm1hdFJvdXRlcyA9IGZ1bmN0aW9uIGZvcm1hdFJvdXRlcyhyb3V0ZXMpIHsKICB2YXIgZm1Sb3V0ZXMgPSBbXTsKICByb3V0ZXMuZm9yRWFjaChmdW5jdGlvbiAocm91dGVyKSB7CiAgICB2YXIgcGF0aCA9IHJvdXRlci5wYXRoLAogICAgICAgIF9jb21wb25lbnQgPSByb3V0ZXIuY29tcG9uZW50LAogICAgICAgIG5hbWUgPSByb3V0ZXIubmFtZSwKICAgICAgICBtZXRhID0gcm91dGVyLm1ldGEsCiAgICAgICAgaWNvbkNscyA9IHJvdXRlci5pY29uQ2xzLAogICAgICAgIGNoaWxkcmVuID0gcm91dGVyLmNoaWxkcmVuOwoKICAgIGlmIChjaGlsZHJlbiAmJiBjaGlsZHJlbiBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgIGNoaWxkcmVuID0gZm9ybWF0Um91dGVzKGNoaWxkcmVuKTsKICAgIH0KCiAgICB2YXIgZm1Sb3V0ZXIgPSB7CiAgICAgIHBhdGg6IHBhdGgsCiAgICAgIG5hbWU6IG5hbWUsCiAgICAgIGljb25DbHM6IGljb25DbHMsCiAgICAgIG1ldGE6IG1ldGEsCiAgICAgIGNoaWxkcmVuOiBjaGlsZHJlbiwKICAgICAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQocmVzb2x2ZSkgewogICAgICAgIGlmIChfY29tcG9uZW50LnN0YXJ0c1dpdGgoIkhvbWUiKSkgewogICAgICAgICAgcmVxdWlyZShbJy4uL3ZpZXdzLycgKyBfY29tcG9uZW50ICsgJy52dWUnXSwgcmVzb2x2ZSk7CiAgICAgICAgfSBlbHNlIGlmIChfY29tcG9uZW50LnN0YXJ0c1dpdGgoIkVtcCIpKSB7CiAgICAgICAgICByZXF1aXJlKFsnLi4vdmlld3MvZW1wLycgKyBfY29tcG9uZW50ICsgJy52dWUnXSwgcmVzb2x2ZSk7CiAgICAgICAgfSBlbHNlIGlmIChfY29tcG9uZW50LnN0YXJ0c1dpdGgoIlBlciIpKSB7CiAgICAgICAgICByZXF1aXJlKFsnLi4vdmlld3MvcGVyLycgKyBfY29tcG9uZW50ICsgJy52dWUnXSwgcmVzb2x2ZSk7CiAgICAgICAgfSBlbHNlIGlmIChfY29tcG9uZW50LnN0YXJ0c1dpdGgoIlNhbCIpKSB7CiAgICAgICAgICByZXF1aXJlKFsnLi4vdmlld3Mvc2FsLycgKyBfY29tcG9uZW50ICsgJy52dWUnXSwgcmVzb2x2ZSk7CiAgICAgICAgfSBlbHNlIGlmIChfY29tcG9uZW50LnN0YXJ0c1dpdGgoIlN0YSIpKSB7CiAgICAgICAgICByZXF1aXJlKFsnLi4vdmlld3Mvc3RhLycgKyBfY29tcG9uZW50ICsgJy52dWUnXSwgcmVzb2x2ZSk7CiAgICAgICAgfSBlbHNlIGlmIChfY29tcG9uZW50LnN0YXJ0c1dpdGgoIlN5cyIpKSB7CiAgICAgICAgICByZXF1aXJlKFsnLi4vdmlld3Mvc3lzLycgKyBfY29tcG9uZW50ICsgJy52dWUnXSwgcmVzb2x2ZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwogICAgZm1Sb3V0ZXMucHVzaChmbVJvdXRlcik7CiAgfSk7CiAgcmV0dXJuIGZtUm91dGVzOwp9Ow=="},{"version":3,"sources":["F:/java-workspace/vhr/vuehr/src/utils/menus.js"],"names":["getRequest","initMenu","router","store","state","routes","length","then","data","fmtRoutes","formatRoutes","addRoutes","commit","dispatch","fmRoutes","forEach","path","component","name","meta","iconCls","children","Array","fmRouter","resolve","startsWith","require","push"],"mappings":"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","sourcesContent":["import {getRequest} from \"@/utils/api\";\r\n\r\nexport const initMenu = (router, store) => {\r\n    if (store.state.routes.length > 0) {\r\n        return;\r\n    }\r\n    getRequest(\"/system/config/menu\").then(data => {\r\n        if (data) {\r\n            let fmtRoutes = formatRoutes(data);\r\n            router.addRoutes(fmtRoutes);\r\n            store.commit('initRoutes', fmtRoutes);\r\n            store.dispatch('connect');\r\n        }\r\n    })\r\n}\r\n\r\nexport const formatRoutes = (routes) => {\r\n    let fmRoutes = [];\r\n\r\n    routes.forEach(router => {\r\n        let {\r\n            path,\r\n            component,\r\n            name,\r\n            meta,\r\n            iconCls,\r\n            children\r\n        } = router;\r\n        if (children && children instanceof Array) {\r\n            children = formatRoutes(children);\r\n        }\r\n        let fmRouter = {\r\n            path: path,\r\n            name: name,\r\n            iconCls: iconCls,\r\n            meta: meta,\r\n            children: children,\r\n            component(resolve) {\r\n                if (component.startsWith(\"Home\")) {\r\n                    require(['../views/' + component + '.vue'], resolve);\r\n                }else if (component.startsWith(\"Emp\")) {\r\n                    require(['../views/emp/' + component + '.vue'], resolve);\r\n                } else if (component.startsWith(\"Per\")) {\r\n                    require(['../views/per/' + component + '.vue'], resolve);\r\n                } else if (component.startsWith(\"Sal\")) {\r\n                    require(['../views/sal/' + component + '.vue'], resolve);\r\n                } else if (component.startsWith(\"Sta\")) {\r\n                    require(['../views/sta/' + component + '.vue'], resolve);\r\n                } else if (component.startsWith(\"Sys\")) {\r\n                    require(['../views/sys/' + component + '.vue'], resolve);\r\n                }\r\n            }\r\n        }\r\n        fmRoutes.push(fmRouter);\r\n    })\r\n\r\n    return fmRoutes;\r\n}"]}]}