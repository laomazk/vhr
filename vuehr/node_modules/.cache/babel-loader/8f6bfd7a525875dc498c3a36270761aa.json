{"remainingRequest":"F:\\java-workspace\\vhr\\vuehr\\node_modules\\babel-loader\\lib\\index.js!F:\\java-workspace\\vhr\\vuehr\\src\\store\\index.js","dependencies":[{"path":"F:\\java-workspace\\vhr\\vuehr\\src\\store\\index.js","mtime":1603097320120},{"path":"F:\\java-workspace\\vhr\\vuehr\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\java-workspace\\vhr\\vuehr\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgVnVleCBmcm9tICd2dWV4JzsKaW1wb3J0IHsgZ2V0UmVxdWVzdCB9IGZyb20gIkAvdXRpbHMvYXBpIjsKaW1wb3J0ICcuLi91dGlscy9zdG9tcCc7CmltcG9ydCAnLi4vdXRpbHMvc29ja2pzJzsKVnVlLnVzZShWdWV4KTsKdmFyIG5vdyA9IG5ldyBEYXRlKCk7CnZhciBzdG9yZSA9IG5ldyBWdWV4LlN0b3JlKHsKICBzdGF0ZTogewogICAgcm91dGVzOiBbXSwKICAgIHNlc3Npb25zOiBbXSwKICAgIGhyczogW10sCiAgICBjdXJyZW50U2Vzc2lvbklkOiAtMSwKICAgIGZpbHRlcktleTogJycsCiAgICBzdG9tcDogbnVsbAogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBpbml0Um91dGVzOiBmdW5jdGlvbiBpbml0Um91dGVzKHN0YXRlLCBkYXRhKSB7CiAgICAgIHN0YXRlLnJvdXRlcyA9IGRhdGE7CiAgICB9LAogICAgY2hhbmdlQ3VycmVudFNlc3Npb25JZDogZnVuY3Rpb24gY2hhbmdlQ3VycmVudFNlc3Npb25JZChzdGF0ZSwgaWQpIHsKICAgICAgc3RhdGUuY3VycmVudFNlc3Npb25JZCA9IGlkOwogICAgfSwKICAgIGFkZE1lc3NhZ2U6IGZ1bmN0aW9uIGFkZE1lc3NhZ2Uoc3RhdGUsIG1zZykgewogICAgICBzdGF0ZS5zZXNzaW9uc1tzdGF0ZS5jdXJyZW50U2Vzc2lvbklkIC0gMV0ubWVzc2FnZXMucHVzaCh7CiAgICAgICAgY29udGVudDogbXNnLAogICAgICAgIGRhdGU6IG5ldyBEYXRlKCksCiAgICAgICAgc2VsZjogdHJ1ZQogICAgICB9KTsKICAgIH0sCiAgICBJTklUX0RBVEE6IGZ1bmN0aW9uIElOSVRfREFUQShzdGF0ZSkgey8vIOa1j+iniOWZqOacrOWcsOeahOWOhuWPsuiBiuWkqeiusOW9leWPr+S7peWcqOi/memHjOWujOaIkAogICAgICAvLyAgICAgbGV0IGRhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndnVlLWNoYXQtc2Vzc2lvbicpOwogICAgICAvLyAgICAgLy9jb25zb2xlLmxvZyhkYXRhKQogICAgICAvLyAgICAgaWYgKGRhdGEpIHsKICAgICAgLy8gICAgICAgICBzdGF0ZS5zZXNzaW9ucyA9IEpTT04ucGFyc2UoZGF0YSk7CiAgICAgIC8vICAgICB9CiAgICB9LAogICAgSU5JVF9IUjogZnVuY3Rpb24gSU5JVF9IUihzdGF0ZSwgZGF0YSkgewogICAgICBzdGF0ZS5ocnMgPSBkYXRhOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgY29ubmVjdDogZnVuY3Rpb24gY29ubmVjdChjb250ZXh0KSB7CiAgICAgIGNvbnRleHQuc3RhdGUuc3RvbXAgPSBTdG9tcC5vdmVyKG5ldyBTb2NrSlMoJy93cy9lcC8nKSk7CiAgICAgIGNvbnRleHQuc3RhdGUuc3RvbXAuY29ubmVjdCh7fSwgZnVuY3Rpb24gKHN1Y2Nlc3MpIHsKICAgICAgICBjb250ZXh0LnN0YXRlLnN0b21wLnN1YnNjcmliZSgnL3VzZXIvcXVldWUvY2hhdC8nLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnbWFtYW1hPj4+Pj4nICsgbXNnLmJvZHkpOwogICAgICAgIH0pOwogICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHt9KTsKICAgIH0sCiAgICBpbml0RGF0YTogZnVuY3Rpb24gaW5pdERhdGEoY29udGV4dCkgewogICAgICBjb250ZXh0LmNvbW1pdCgnSU5JVF9EQVRBJyk7CiAgICAgIGdldFJlcXVlc3QoIi9jaGF0L2hycyIpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICBpZiAocmVzcCkgewogICAgICAgICAgY29udGV4dC5jb21taXQoJ0lOSVRfSFInLCByZXNwKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfSk7CnN0b3JlLndhdGNoKGZ1bmN0aW9uIChzdGF0ZSkgewogIHJldHVybiBzdGF0ZS5zZXNzaW9uczsKfSwgZnVuY3Rpb24gKHZhbCkgewogIGNvbnNvbGUubG9nKCdDSEFOR0U6ICcsIHZhbCk7CiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Z1ZS1jaGF0LXNlc3Npb24nLCBKU09OLnN0cmluZ2lmeSh2YWwpKTsKfSwgewogIGRlZXA6IHRydWUKICAvKui/meS4quiyjOS8vOaYr+W8gOWQr3dhdGNo55uR5rWL55qE5Yik5patLOWumOaWueivtOaYjuS5n+avlOi+g+aooeeziiovCgp9KTsKZXhwb3J0IGRlZmF1bHQgc3RvcmU7"},{"version":3,"sources":["F:/java-workspace/vhr/vuehr/src/store/index.js"],"names":["Vue","Vuex","getRequest","use","now","Date","store","Store","state","routes","sessions","hrs","currentSessionId","filterKey","stomp","mutations","initRoutes","data","changeCurrentSessionId","id","addMessage","msg","messages","push","content","date","self","INIT_DATA","INIT_HR","actions","connect","context","Stomp","over","SockJS","success","subscribe","console","log","body","error","initData","commit","then","resp","watch","val","localStorage","setItem","JSON","stringify","deep"],"mappings":"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","sourcesContent":["import Vue from 'vue';\r\nimport Vuex from 'vuex';\r\nimport {getRequest} from \"@/utils/api\";\r\n\r\nimport '../utils/stomp'\r\nimport '../utils/sockjs'\r\nVue.use(Vuex)\r\n\r\nconst now = new Date();\r\nconst store = new Vuex.Store({\r\n    state: {\r\n        routes: [],\r\n        sessions: [],\r\n        hrs:[],\r\n        currentSessionId: -1,\r\n        filterKey: '',\r\n        stomp:null\r\n    },\r\n    mutations: {\r\n        initRoutes(state, data) {\r\n            state.routes = data;\r\n        },\r\n        changeCurrentSessionId(state, id) {\r\n            state.currentSessionId = id;\r\n        },\r\n        addMessage(state, msg) {\r\n            state.sessions[state.currentSessionId - 1].messages.push({\r\n                content: msg,\r\n                date: new Date(),\r\n                self: true\r\n            })\r\n        },\r\n        INIT_DATA(state) {\r\n        // 浏览器本地的历史聊天记录可以在这里完成\r\n        //     let data = localStorage.getItem('vue-chat-session');\r\n        //     //console.log(data)\r\n        //     if (data) {\r\n        //         state.sessions = JSON.parse(data);\r\n        //     }\r\n        },\r\n        INIT_HR(state,data){\r\n            state.hrs=data\r\n        }\r\n    },\r\n    actions: {\r\n        connect(context){\r\n            context.state.stomp=Stomp.over(new SockJS('/ws/ep/'))\r\n            context.state.stomp.connect({},success=>{\r\n                context.state.stomp.subscribe('/user/queue/chat/',msg=>{\r\n                    console.log('mamama>>>>>'+msg.body);\r\n                })\r\n            },error=>{\r\n\r\n            })\r\n        },\r\n        initData (context) {\r\n            context.commit('INIT_DATA')\r\n            getRequest(\"/chat/hrs\").then(resp=>{\r\n                if(resp){\r\n                    context.commit('INIT_HR',resp)\r\n                }\r\n            })\r\n        }\r\n    }\r\n})\r\n\r\nstore.watch(function (state) {\r\n    return state.sessions\r\n},function (val) {\r\n    console.log('CHANGE: ', val);\r\n    localStorage.setItem('vue-chat-session', JSON.stringify(val));\r\n},{\r\n    deep:true/*这个貌似是开启watch监测的判断,官方说明也比较模糊*/\r\n})\r\n\r\n\r\nexport default store;"]}]}