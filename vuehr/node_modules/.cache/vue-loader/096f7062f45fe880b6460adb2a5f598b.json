{"remainingRequest":"F:\\java-workspace\\vhr\\vuehr\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\java-workspace\\vhr\\vuehr\\src\\views\\sal\\SalSobCfg.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\java-workspace\\vhr\\vuehr\\src\\views\\sal\\SalSobCfg.vue","mtime":1603084696332},{"path":"F:\\java-workspace\\vhr\\vuehr\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\java-workspace\\vhr\\vuehr\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\java-workspace\\vhr\\vuehr\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\java-workspace\\vhr\\vuehr\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJTYWxTb2JDZmciLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBlbXBzOiBbXSwNCiAgICAgIHRvdGFsOiAwLA0KICAgICAgY3VycmVudFBhZ2U6IDEsDQogICAgICBjdXJyZW50U2l6ZTogMTAsDQogICAgICBjdXJyZW50U2FsYXJ5OiBudWxsLA0KICAgICAgc2FsYXJpZXM6IFtdDQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuaW5pdEVtcHMoKTsNCiAgICB0aGlzLmluaXRTYWxhcmllcygpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgc2l6ZUNoYW5nZShzaXplKSB7DQogICAgICB0aGlzLmN1cnJlbnRTaXplID0gc2l6ZTsNCiAgICAgIHRoaXMuaW5pdEVtcHMoKTsNCiAgICB9LA0KICAgIGN1cnJlbnRDaGFuZ2UocGFnZSkgew0KICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHBhZ2U7DQogICAgICB0aGlzLmluaXRFbXBzKCk7DQogICAgfSwNCiAgICBoaWRlUG9wKGRhdGEpIHsNCiAgICAgIGlmICh0aGlzLmN1cnJlbnRTYWxhcnkpIHsNCiAgICAgICAgdGhpcy5wdXRSZXF1ZXN0KCcvc2FsYXJ5L3NvYmNmZy8/ZWlkPScgKyBkYXRhLmlkICsgJyZzaWQ9JyArIHRoaXMuY3VycmVudFNhbGFyeSkudGhlbihyZXNwID0+IHsNCiAgICAgICAgICBpZiAocmVzcCkgew0KICAgICAgICAgICAgdGhpcy5pbml0RW1wcygpDQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIHNob3dQb3AoZGF0YSkgew0KICAgICAgaWYgKGRhdGEpIHsNCiAgICAgICAgdGhpcy5jdXJyZW50U2FsYXJ5ID0gZGF0YS5pZDsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuY3VycmVudFNhbGFyeSA9IG51bGw7DQogICAgICB9DQogICAgfSwNCiAgICBpbml0U2FsYXJpZXMoKSB7DQogICAgICB0aGlzLmdldFJlcXVlc3QoIi9zYWxhcnkvc29iY2ZnL3NhbGFyaWVzIikudGhlbihyZXNwID0+IHsNCiAgICAgICAgaWYgKHJlc3ApIHsNCiAgICAgICAgICB0aGlzLnNhbGFyaWVzID0gcmVzcDsNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGluaXRFbXBzKCkgew0KICAgICAgdGhpcy5nZXRSZXF1ZXN0KCIvc2FsYXJ5L3NvYmNmZy8/cGFnZT0iICsgdGhpcy5jdXJyZW50UGFnZSArICcmc2l6ZT0nICsgdGhpcy5jdXJyZW50U2l6ZSkudGhlbihyZXNwID0+IHsNCiAgICAgICAgaWYgKHJlc3ApIHsNCiAgICAgICAgICB0aGlzLmVtcHMgPSByZXNwLmRhdGE7DQogICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3AudG90YWw7DQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["SalSobCfg.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SalSobCfg.vue","sourceRoot":"src/views/sal","sourcesContent":["<template>\r\n  <div>\r\n    <div>\r\n      <el-table :data=\"emps\" border stripe size=\"mini\">\r\n        <el-table-column type=\"selection\" align=\"left\" width=\"55\"></el-table-column>\r\n        <el-table-column prop=\"name\" label=\"姓名\" fixed width=\"120\" align=\"left\"></el-table-column>\r\n        <el-table-column prop=\"workID\" label=\"工号\" width=\"120\" align=\"left\"></el-table-column>\r\n        <el-table-column prop=\"email\" label=\"电子邮件\" width=\"200\" align=\"left\"></el-table-column>\r\n        <el-table-column prop=\"phone\" label=\"电话号码\" width=\"120\" align=\"left\"></el-table-column>\r\n        <el-table-column prop=\"department.name\" label=\"所属部门\" width=\"120\" align=\"left\"></el-table-column>\r\n        <el-table-column label=\"所属部门\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <el-tooltip placement=\"right\" v-if=\"scope.row.salary\">\r\n              <div slot=\"content\">\r\n                <table>\r\n                  <tr>\r\n                    <td>基本工资</td>\r\n                    <td>{{scope.row.salary.basicSalary}}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>交通补助</td>\r\n                    <td>{{scope.row.salary.trafficSalary}}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>午餐补助</td>\r\n                    <td>{{scope.row.salary.lunchSalary}}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>奖金</td>\r\n                    <td>{{scope.row.salary.bonus}}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>养老金比率</td>\r\n                    <td>{{scope.row.salary.pensionPer}}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>养老金基数</td>\r\n                    <td>{{scope.row.salary.pensionBase}}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>医疗保险比率</td>\r\n                    <td>{{scope.row.salary.medicalPer}}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>医疗保险基数</td>\r\n                    <td>{{scope.row.salary.medicalBase}}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>公积金比率</td>\r\n                    <td>{{scope.row.salary.accumulationFundPer}}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>公积金基数</td>\r\n                    <td>{{scope.row.salary.accumulationFundBase}}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>启用时间</td>\r\n                    <td>{{scope.row.salary.createDate}}</td>\r\n                  </tr>\r\n                </table>\r\n              </div>\r\n              <el-tag>{{scope.row.salary.name}}</el-tag>\r\n            </el-tooltip>\r\n            <el-tag v-else>暂未设置</el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <el-popover\r\n                placement=\"left\"\r\n                title=\"修改工资账套\"\r\n                @show=\"showPop(scope.row.salary)\"\r\n                @hide=\"hidePop(scope.row)\"\r\n                width=\"200\"\r\n                trigger=\"click\">\r\n              <div>\r\n                <el-select v-model=\"currentSalary\" placeholder=\"请选择\" size=\"mini\">\r\n                  <el-option\r\n                      v-for=\"item in salaries\"\r\n                      :key=\"item.id\"\r\n                      :label=\"item.name\"\r\n                      :value=\"item.id\">\r\n                  </el-option>\r\n                </el-select>\r\n              </div>\r\n              <el-button slot=\"reference\" type=\"danger\">修改工资账套</el-button>\r\n            </el-popover>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <div style=\"display: flex;justify-content: flex-end\">\r\n        <el-pagination\r\n            background\r\n            @size-change=\"sizeChange\"\r\n            @current-change=\"currentChange\"\r\n            layout=\"sizes, prev, pager, next, jumper, ->, total, slot\"\r\n            :total=\"total\">\r\n        </el-pagination>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"SalSobCfg\",\r\n  data() {\r\n    return {\r\n      emps: [],\r\n      total: 0,\r\n      currentPage: 1,\r\n      currentSize: 10,\r\n      currentSalary: null,\r\n      salaries: []\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initEmps();\r\n    this.initSalaries();\r\n  },\r\n  methods: {\r\n    sizeChange(size) {\r\n      this.currentSize = size;\r\n      this.initEmps();\r\n    },\r\n    currentChange(page) {\r\n      this.currentPage = page;\r\n      this.initEmps();\r\n    },\r\n    hidePop(data) {\r\n      if (this.currentSalary) {\r\n        this.putRequest('/salary/sobcfg/?eid=' + data.id + '&sid=' + this.currentSalary).then(resp => {\r\n          if (resp) {\r\n            this.initEmps()\r\n          }\r\n        });\r\n      }\r\n    },\r\n    showPop(data) {\r\n      if (data) {\r\n        this.currentSalary = data.id;\r\n      } else {\r\n        this.currentSalary = null;\r\n      }\r\n    },\r\n    initSalaries() {\r\n      this.getRequest(\"/salary/sobcfg/salaries\").then(resp => {\r\n        if (resp) {\r\n          this.salaries = resp;\r\n        }\r\n      })\r\n    },\r\n    initEmps() {\r\n      this.getRequest(\"/salary/sobcfg/?page=\" + this.currentPage + '&size=' + this.currentSize).then(resp => {\r\n        if (resp) {\r\n          this.emps = resp.data;\r\n          this.total = resp.total;\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}